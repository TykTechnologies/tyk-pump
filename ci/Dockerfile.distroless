# Generated by: gromit policy

FROM debian:bookworm-slim as DEB
ARG TARGETARCH

ENV DEBIAN_FRONTEND=noninteractive

# Copy and install the standard package for the given architecture
COPY tyk-pump*${TARGETARCH}.deb /tyk-pump.deb
RUN dpkg -i /tyk-pump.deb && rm /tyk-pump.deb

FROM gcr.io/distroless/static-debian12:nonroot

COPY --from=DEB /opt/tyk-pump /opt/tyk-pump

ARG PORTS
EXPOSE $PORTS

WORKDIR /opt/tyk-pump/
ENTRYPOINT ["/opt/tyk-pump/tyk-pump" ]
CMD [ "--conf=/opt/tyk-pump/pump.conf" ]