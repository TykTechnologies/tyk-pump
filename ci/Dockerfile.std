# Generated by: gromit policy

FROM debian:12-slim as DEB
ARG TARGETARCH

COPY *${TARGETARCH}.deb /
RUN dpkg -i /tyk-pump*${TARGETARCH}.deb && rm /*.deb

FROM gcr.io/distroless/static-debian12

COPY --from=DEB /opt/tyk-pump /opt/tyk-pump
ARG PORTS

EXPOSE $PORTS

WORKDIR /opt/tyk-pump/

ENTRYPOINT ["/opt/tyk-pump/tyk-pump" ]
CMD [ "--conf=/opt/tyk-pump/pump.conf" ]
